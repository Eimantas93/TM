{% extends "layout.html" %}

{% block title %}
Task Manager
{% endblock %}

{% block main %}
<h1 class="pageTitle">Hello, <b>{{ name }}</b>! Welcome to Task Manager App!</h1>
<hr>
<h2 style="margin-left: 5px;">Ongoing tasks:</h2>
<nav>
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
      <button class="nav-link active" id="nav-executor-tab" data-bs-toggle="tab" data-bs-target="#nav-executor" type="button" role="tab" aria-controls="nav-executor" aria-selected="true">Assigned to you</button>
      <button class="nav-link" id="nav-creator-tab" data-bs-toggle="tab" data-bs-target="#nav-creator" type="button" role="tab" aria-controls="nav-creator" aria-selected="false">Assigned by you</button>
      <button class="nav-link" id="nav-yourTasks-tab" data-bs-toggle="tab" data-bs-target="#nav-yourTasks" type="button" role="tab" aria-controls="nav-yourTasks" aria-selected="false">Your tasks</button>
    </div>
  </nav>
  <div class="tab-content" id="nav-tabContent">
    <div class="tab-pane fade show active" id="nav-executor" role="tabpanel" aria-labelledby="nav-executor-tab">
        {% for row in executor %}
        {% if row[1] != row[2] %}
<div class="container-2" style="margin-top: 20px;">
    <form action="/" method="POST">
        <button type="submit" name="task_id" value="{{ row[0] }}" class="edit">&#9997; Edit task</button>
        <table class="table">
            <!-- <tr class="borderr">
                <th scope="col" class="borderName">Creation date</th>
                <td class="borderr">{{ row[5] }}</td>
            </tr> -->
            <tr class="borderr">
                <th scope="col" class="borderName">Task ID</th>
                <td class="borderr">{{ row[0] }} </td>
            </tr>
            <tr class="borderr">
                <th scope="col" class="borderName">Creator name</th>
                <td class="borderr">
                    {% for user in users %}
                    {% if user[0] == row[1] %}
                    {{ user[1] }}
                    {% endif %}
                    {% endfor %}
                </td>
            </tr>
            <!-- <tr class="borderr">
                <th scope="col" class="borderName">Executor name</th>
                <td class="borderr">
                    {% for user in users %}
                    {% if user[0] == row[2] %}
                    {{ user[1] }}
                    {% endif %}
                    {% endfor %}
                </td>
            </tr> -->
            <tr class="borderr">
                <th scope="col" class="borderName" tyle="white-space: pre-wrap;">Heading</th>
                <td class="borderr">{{ row[3] }}</td>
            </tr>
            <!-- <tr class="borderr">
                <th scope="col" class="borderName">Description</th>
                <td class="borderr" style="white-space: pre-wrap;">{{ row[4] }}</td>
            </tr> -->
            <tr class="borderr">
                <th scope="col" class="borderName">Deadline</th>
                <td class="borderr">{{ row[6] }}</td>
            </tr>
            <!-- <tr class="borderr">
                <th scope="col" class="borderName">Status</th>
                <td class="borderr">In Progress</td>
            </tr> -->
        </table>
        <hr>
    </form>
</div>
{% endif %}
{% endfor %}
    </div>
    <div class="tab-pane fade" id="nav-creator" role="tabpanel" aria-labelledby="nav-creator-tab">
        {% for row in creator %}
        {% if row[1] != row[2] %}
    <div class="container-2" style="margin-top: 20px;">
        <form action="/" method="POST">
            <button type="submit" name="task_id" value="{{ row[0] }}" class="edit">&#9997; Edit task</button>
            <table class="table">
                <tr class="borderr">
                    <th scope="col" class="borderName">Task ID</th>
                    <td class="borderr">{{ row[0] }} </td>
                </tr>
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Creation date</th>
                    <td class="borderr">{{ row[5] }}</td>
                </tr> -->
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Creator name</th>
                    <td class="borderr">
                        {% for user in users %}
                        {% if user[0] == row[1] %}
                        {{ user[1] }}
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr> -->
                <tr class="borderr">
                    <th scope="col" class="borderName">Executor name</th>
                    <td class="borderr">
                        {% for user in users %}
                        {% if user[0] == row[2] %}
                        {{ user[1] }}
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr class="borderr">
                    <th scope="col" class="borderName" style="white-space: pre-wrap;">Heading</th>
                    <td class="borderr">{{ row[3] }}</td>
                </tr>
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Description</th>
                    <td class="borderr" style="white-space: pre-wrap;">{{ row[4] }}</td>
                </tr> -->
                <tr class="borderr">
                    <th scope="col" class="borderName">Deadline</th>
                    <td class="borderr">{{ row[6] }}</td>
                </tr>
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Status</th>
                    <td class="borderr">In Progress</td>
                </tr> -->
            </table>
            <hr>
        </form>
    </div>
    {% endif %}
    {% endfor %}
    </div>
    <div class="tab-pane fade" id="nav-yourTasks" role="tabpanel" aria-labelledby="nav-yourTasks-tab">
        {% for row in creator %}
        {% if row[1] == row[2] %}
    <div class="container-2" style="margin-top: 20px;">
        <form action="/" method="POST">
            <button type="submit" name="task_id" value="{{ row[0] }}" class="edit">&#9997; Edit task</button>
            <table class="table">
                <tr class="borderr">
                    <th scope="col" class="borderName">Task ID</th>
                    <td class="borderr">{{ row[0] }} </td>
                </tr>
                <tr class="borderr">
                    <th scope="col" class="borderName">Creation date</th>
                    <td class="borderr">{{ row[5] }}</td>
                </tr>
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Creator name</th>
                    <td class="borderr">
                        {% for user in users %}
                        {% if user[0] == row[1] %}
                        {{ user[1] }}
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr class="borderr">
                    <th scope="col" class="borderName">Executor name</th>
                    <td class="borderr">
                        {% for user in users %}
                        {% if user[0] == row[2] %}
                        {{ user[1] }}
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr> -->
                <tr class="borderr">
                    <th scope="col" class="borderName" tyle="white-space: pre-wrap;">Heading</th>
                    <td class="borderr">{{ row[3] }}</td>
                </tr>
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Description</th>
                    <td class="borderr" style="white-space: pre-wrap;">{{ row[4] }}</td>
                </tr> -->
                <tr class="borderr">
                    <th scope="col" class="borderName">Deadline</th>
                    <td class="borderr">{{ row[6] }}</td>
                </tr>
                <!-- <tr class="borderr">
                    <th scope="col" class="borderName">Status</th>
                    <td class="borderr">In Progress</td>
                </tr> -->
            </table>
            <hr>
        </form>
    </div>
    {% endif %}
    {% endfor %}
    </div>
  </div>
{% endblock %}